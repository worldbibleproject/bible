(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{6725:function(e,t,s){Promise.resolve().then(s.t.bind(s,3385,23)),Promise.resolve().then(s.t.bind(s,9646,23)),Promise.resolve().then(s.bind(s,6429))},6429:function(e,t,s){"use strict";s.r(t),s.d(t,{Providers:function(){return p}});var n=s(7437),r=s(9077),a=s(9921),i=s(5925),o=s(3779),c=s(2265),u=s(5732);let l=(0,c.createContext)(void 0);function h(e){let{children:t}=e,[s,r]=(0,c.useState)(null),[a,i]=(0,c.useState)(!1),{token:h,isAuthenticated:p}=(0,o.a)();return(0,c.useEffect)(()=>{if(p&&h){let e=(0,u.io)("ws://localhost:3001",{auth:{token:h},autoConnect:!0});return e.on("connect",()=>{console.log("Socket connected"),i(!0)}),e.on("disconnect",()=>{console.log("Socket disconnected"),i(!1)}),e.on("connect_error",e=>{console.error("Socket connection error:",e),i(!1)}),r(e),()=>{e.close()}}s&&(s.close(),r(null),i(!1))},[p,h]),(0,n.jsx)(l.Provider,{value:{socket:s,isConnected:a,joinConversation:e=>{s&&s.emit("join_conversation",e)},leaveConversation:e=>{s&&s.emit("leave_conversation",e)},sendTyping:(e,t)=>{s&&(t?s.emit("typing_start",{conversationId:e}):s.emit("typing_stop",{conversationId:e}))},onTyping:e=>{s&&s.on("user_typing",e)},offTyping:e=>{s&&s.off("user_typing",e)}},children:t})}function p(e){let{children:t}=e,[s]=(0,c.useState)(()=>new r.QueryClient({defaultOptions:{queries:{staleTime:3e5,cacheTime:6e5,retry:1,refetchOnWindowFocus:!1}}}));return(0,n.jsxs)(r.QueryClientProvider,{client:s,children:[(0,n.jsx)(o.H,{children:(0,n.jsxs)(h,{children:[t,(0,n.jsx)(i.x7,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10B981",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#EF4444",secondary:"#fff"}}}})]})}),(0,n.jsx)(a.ReactQueryDevtools,{initialIsOpen:!1})]})}},3779:function(e,t,s){"use strict";s.d(t,{H:function(){return c},a:function(){return u}});var n=s(7437),r=s(2265),a=s(8222),i=s(5925);let o=(0,r.createContext)(void 0);function c(e){let{children:t}=e,[s,c]=(0,r.useState)(null),[u,l]=(0,r.useState)(null),[h,p]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=localStorage.getItem("auth_token");e?(l(e),a.x.setAuthToken(e),d()):p(!1)},[]);let d=async()=>{try{var e;let t=await a.x.getCurrentUser();(null===(e=t.data)||void 0===e?void 0:e.user)&&c(t.data.user)}catch(e){console.error("Failed to fetch current user:",e),a.x.clearAuthToken(),l(null)}finally{p(!1)}},g=async e=>{var t,s,n,r;try{p(!0);let n=await a.x.login(e);if((null===(t=n.data)||void 0===t?void 0:t.user)&&(null===(s=n.data)||void 0===s?void 0:s.token))c(n.data.user),l(n.data.token),i.ZP.success("Login successful!");else throw Error("Invalid response from server")}catch(t){let e=(null===(r=t.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.error)||"Login failed";throw i.ZP.error(e),t}finally{p(!1)}},y=async e=>{var t,s,n,r;try{p(!0);let n=await a.x.register(e);if((null===(t=n.data)||void 0===t?void 0:t.user)&&(null===(s=n.data)||void 0===s?void 0:s.token))c(n.data.user),l(n.data.token),i.ZP.success("Registration successful!");else throw Error("Invalid response from server")}catch(t){let e=(null===(r=t.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.error)||"Registration failed";throw i.ZP.error(e),t}finally{p(!1)}};return(0,n.jsx)(o.Provider,{value:{user:s,token:u,login:g,register:y,logout:()=>{c(null),l(null),a.x.clearAuthToken(),i.ZP.success("Logged out successfully")},isLoading:h,isAuthenticated:!!s&&!!u},children:t})}function u(){let e=(0,r.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8222:function(e,t,s){"use strict";s.d(t,{h:function(){return i},x:function(){return a}});var n=s(2173);class r{setupInterceptors(){this.client.interceptors.request.use(e=>{let t=this.getToken();return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),this.client.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(this.clearToken(),window.location.href="/login"),Promise.reject(e)})}getToken(){return localStorage.getItem("auth_token")}setToken(e){localStorage.setItem("auth_token",e)}clearToken(){localStorage.removeItem("auth_token")}setAuthToken(e){this.setToken(e)}clearAuthToken(){this.clearToken()}async get(e,t){return(await this.client.get(e,t)).data}async post(e,t,s){return(await this.client.post(e,t,s)).data}async put(e,t,s){return(await this.client.put(e,t,s)).data}async patch(e,t,s){return(await this.client.patch(e,t,s)).data}async delete(e,t){return(await this.client.delete(e,t)).data}async login(e){var t;let s=await this.post("/api/auth/login",e);return(null===(t=s.data)||void 0===t?void 0:t.token)&&this.setAuthToken(s.data.token),s}async register(e){var t;let s=await this.post("/api/auth/register",e);return(null===(t=s.data)||void 0===t?void 0:t.token)&&this.setAuthToken(s.data.token),s}async getCurrentUser(){return this.get("/api/auth/me")}async forgotPassword(e){return this.post("/api/auth/forgot-password",{email:e})}async resetPassword(e,t){return this.post("/api/auth/reset-password",{token:e,password:t})}async getUserProfile(){return this.get("/api/users/profile")}async updateUserProfile(e){return this.put("/api/users/profile",e)}async processWizard(e){return this.post("/api/wizard/process",e)}async getWizardData(){return this.get("/api/wizard/my-data")}async getSeekerProfile(){return this.get("/api/seekers/profile")}async updateSeekerProfile(e){return this.post("/api/seekers/profile",e)}async getMentors(e){return this.get("/api/seekers/mentors",{params:e})}async getMentorDetails(e){return this.get("/api/seekers/mentors/".concat(e))}async requestMentorRelationship(e,t){return this.post("/api/seekers/mentors/".concat(e,"/request"),{message:t})}async getMentorRelationships(){return this.get("/api/seekers/mentor-relationships")}async getGroupSessions(e){return this.get("/api/seekers/group-sessions",{params:e})}async joinGroupSession(e){return this.post("/api/seekers/group-sessions/".concat(e,"/join"))}async getMentorProfile(){return this.get("/api/mentors/profile")}async updateMentorProfile(e){return this.post("/api/mentors/profile",e)}async getMentees(){return this.get("/api/mentors/mentees")}async updateMentorRelationship(e,t){return this.patch("/api/mentors/mentees/".concat(e,"/status"),t)}async createGroupSession(e){return this.post("/api/mentors/group-sessions",e)}async getMentorGroupSessions(e){return this.get("/api/mentors/group-sessions",{params:e})}async getMentorSessions(e){return this.get("/api/mentors/sessions",{params:e})}async getChurches(e){return this.get("/api/churches",{params:e})}async getChurchDetails(e){return this.get("/api/churches/".concat(e))}async createChurch(e){return this.post("/api/churches",e)}async updateChurch(e,t){return this.put("/api/churches/".concat(e),t)}async getMyChurches(e){return this.get("/api/churches/my-churches",{params:e})}async getAvailableSeekers(e){return this.get("/api/churches/seekers/available",{params:e})}async createChurchConnection(e,t,s){return this.post("/api/churches/".concat(e,"/connect/").concat(t),{connectionNotes:s})}async getChurchConnections(e){return this.get("/api/churches/connections",{params:e})}async getSessions(e){return this.get("/api/sessions",{params:e})}async getSessionDetails(e){return this.get("/api/sessions/".concat(e))}async updateSessionStatus(e,t,s){return this.patch("/api/sessions/".concat(e,"/status"),{status:t,notes:s})}async updateParticipantStatus(e,t,s,n){return this.patch("/api/sessions/".concat(e,"/participants/").concat(t),{status:s,feedback:n})}async getSessionStats(){return this.get("/api/sessions/stats/overview")}async getConversation(e,t){return this.get("/api/messages/conversation/".concat(e),{params:t})}async sendMessage(e){return this.post("/api/messages/send",e)}async markMessageAsRead(e){return this.patch("/api/messages/".concat(e,"/read"))}async getUnreadCount(){return this.get("/api/messages/unread-count")}async getConversations(){return this.get("/api/messages/conversations")}async deleteMessage(e){return this.delete("/api/messages/".concat(e))}async getAdminStats(){return this.get("/api/admin/stats")}async getPendingApprovals(e){return this.get("/api/admin/pending-approvals",{params:e})}async approveUser(e,t,s){return this.patch("/api/admin/users/".concat(e,"/approve"),{approved:t,notes:s})}async inviteUser(e){return this.post("/api/admin/invite",e)}async getInvitations(e){return this.get("/api/admin/invitations",{params:e})}async getUserActivity(e){return this.get("/api/admin/users/".concat(e,"/activity"))}constructor(){this.client=n.Z.create({baseURL:"http://localhost:3001",timeout:1e4,headers:{"Content-Type":"application/json"}}),this.setupInterceptors()}}let a=new r,i=a},3385:function(){}},function(e){e.O(0,[34,605,971,938,744],function(){return e(e.s=6725)}),_N_E=e.O()}]);